# 系统介绍

## Direct locks
多核直接运行HTB,保留HTB设计里每个节点的trTCM

flow绑定核，多个flow的发包计算过程是： 更新子节点和所有祖先的trTCM。祖先trTCM由多个CPU更新时，直接对比tsc值，小于0则不增加——naive解决多CPU之间的时间问题——会有限速不准的问题。着重用来观察锁的问题。

## Coral
仿照Coral的周期性更新算法，周期性更新HTB整体的带宽值——会有更新迟缓的问题，但是可以看出并行化设计后锁的减少和性能的提高。

## TBF update split
把父节点令牌的更新交由同一个核完成——不把父节点令牌更新交给多个核完成；
父节点的令牌请求出现锁的范围减少
如果把更新操作切换为触发——如果令牌数目小于某个值，标记需要更新……

## Coral bandwidth
更新方式变成保留带宽的借还操作




解决HTB多个核时的时钟同步问题——每个核使用一个单独的计时器

